{% extends 'admin/base.html.twig' %}

{% block title 'Mon compte' %}

{% block body %}

    <a href="{{ path('app_admin_home') }}"
       class="btn-link mb-4">
        {{ icon('arrow-left', '', 'mr-2') }}
        <span>
            Accueil
        </span>
    </a>

    <h4 class="text-2xl font-bold md:text-3xl">Mon compte</h4>

    {% if requestEmailChange and not requestEmailChange.createdAt|is_older_than_hours(1) %}
        <div class="alert-ping">
            <strong>Attention !</strong>
            <br>
            Vous avez demandé un changement d'adresse email.
            <br>
            Veuillez vérifier votre
            nouvelle boîte {{ requestEmailChange.email }} pour confirmer.
        </div>
    {% endif %}

    <div class="mt-4 grid grid-cols-1 gap-4 card card-custom md:grid-cols-3">
        <div class="col-span-1 flex flex-col justify-start">
            <h6 class="card-section-title">
                Profil
            </h6>
            <p class="card-section-subtitle">
                Vous pouvez modifier vos informations personnelles.
            </p>
        </div>
        <div class="col-span-2 flex flex-col space-y-3">
            {{ form_start(form) }}
            <div class="mt-4 grid grid-cols-1 gap-x-6 gap-y-3 sm:grid-cols-2">
                <div class="col-span-full sm:col-span-1">
                    {{ form_row(form.fullname) }}
                </div>

                <div class="col-span-full sm:col-span-1">
                    {{ form_row(form.phone) }}
                </div>

                <div class="sm:col-span-full">
                    {{ form_row(form.email) }}
                    {% if not app.user.isVerified %}
                        <p class="text-sm text-red-800">Veuillez confirmer votre adresse email.
                            <a href="{{ path('app_account_resend_verification_email') }}" class="underline">
                                Renvoyer l'email de confirmation</a>
                        </p>
                    {% endif %}
                </div>


                <div class="sm:col-span-full">
                    {{ form_row(form.dateOfBirthday) }}
                    {% if not app.user.dateOfBirthday %}
                        <p class="text-sm text-primary-800">Des réductions s'appliquent en fonction de votre âge.</p>
                    {% endif %}
                </div>

                {#                <div class="col-span-full"> #}
                {#                    {{ form_row(form.avatarFile) }} #}
                {#                </div> #}

                <!-- submit btn at right -->
                <div class="pt-5 sm:col-span-full">
                    <div class="flex justify-end">
                        <button type="submit" class="btn btn-md btn-primary">
                            {{ icon('save') }}
                            <span>Enregistrer</span>
                        </button>
                    </div>
                </div>

            </div>
            {{ form_end(form) }}
        </div>
    </div>

    <div class="mt-4 grid grid-cols-1 gap-4 card card-custom md:grid-cols-3 mb-4">
        <div class="col-span-1 flex flex-col justify-start">
            <h6 class="card-section-title">
                Mot de passe
            </h6>
            <p class="card-section-subtitle">
                Pour des raisons de sécurité, votre mot de passe doit contenir au moins 6 caractères, dont au moins
                une majuscule, une minuscule, un chiffre et un caractère spécial.
            </p>
        </div>

        <div class="col-span-2 flex flex-col space-y-3">
            <div class="mt-4 grid grid-cols-1 gap-x-6 gap-y-3 sm:grid-cols-2">
                <div class="sm:col-span-full sm:flex sm:justify-end">
                    <a href="{{ path('app_admin_account_change_password') }}" class="btn btn-md btn-primary">
                        {{ icon('key') }}
                        <span>Changer le mot de passe</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-4 grid grid-cols-1 gap-4 card card-custom md:grid-cols-3 mb-4">
        <div class="col-span-1 flex flex-col justify-start">
            <h6 class="card-section-title">
                Supprimer mon compte
            </h6>
            <p class="card-section-subtitle">
                Vous pouvez demander la suppression de votre compte. Vous disposerez d'un délai de 30 jours pour
                annuler votre demande.
            </p>
        </div>

        <div class="col-span-2 flex flex-col space-y-3">
            <div class="mt-4 grid grid-cols-1 gap-x-6 gap-y-3 sm:grid-cols-2">
                <div class="sm:col-span-full sm:flex sm:justify-end">
                    <a href="" class="btn btn-md btn-danger">
                        {{ icon('trash') }}
                        <span>Demander la suppression</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
