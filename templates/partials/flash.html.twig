{% for type, messages in app.session.flashBag.all() %}
    {% for message in messages %}
        {% if     "toast_message" == type %}
            {% set decodedMessage = message|json_decode(true) %}
            {% if decodedMessage %}
                {% set toastTitle = decodedMessage.title ?? '' %}
                {% set toastMessage = decodedMessage.message ?? '' %}
                {% set toastType = decodedMessage.type ?? 'info' %}
                {% set toastDuration = decodedMessage.duration ?? 1000 %}
                {% set toastPosition = decodedMessage.position ?? 'bottom-right' %}
                <script>
                    $(document).ready(function () {
                        window.toast.showToastNotification({
                            heading: '{{ toastTitle }}',
                            text: '{{ toastMessage }}',
                            position: '{{ toastPosition }}',
                            type: '{{ toastType }}',
                            hideAfter: {{ toastDuration }},
                        })
                    });
                </script>
            {% endif %}
        {% elseif "flash_message" == type %}
            {% set decodedMessage = message|json_decode(true) %}
            {% if decodedMessage %}
                {% set title = decodedMessage.title ?? '' %}
                {% set message = decodedMessage.message ?? '' %}
                {% set type = decodedMessage.type %}
                {% set duration = decodedMessage.duration %}

                <div class="alert alert-{{ type }}">
                    <h4 class="alert-heading">
                        {{ title }}
                    </h4>
                    <p class="alert-content">
                        {{ message | raw }}
                    </p>
                </div>
            {% endif %}
        {% else %}
            <div class="alert alert-{{ type }}">
                <p class="alert-content">
                    {{ message | raw }}
                </p>
            </div>
        {% endif %}
    {% endfor %}
{% endfor %}
